import{L as w,a as t,M as se,g as ie,r as a,h as F,u as ae,s as G,i as ce,j as le,k as pe}from"./vendor.66f8334e.js";import{t as v,B as s,a as S,E as z}from"./globals.7bd5abb3.js";import{u as T}from"./windows.ba65c777.js";import{u as me,g as ye,N as ge,c as D,a as ue,S as be,b as ke,Z as de}from"./hotkeys.841a8dfc.js";const he=w.extend({},w.CRS.Simple,{transformation:new w.Transformation(1/16,0,-1/16,0)}),_e=w.latLng(0,4e3),Ee=w.latLng(1e4,14336),fe=w.latLngBounds(_e,Ee);function we({initialZoom:r,setMap:o,children:n}){return t.createElement(se,{maxBounds:w.latLngBounds([-1e4,-7e3],[2e4,25e3]),bounds:fe,center:[4200,8900],zoomControl:!1,doubleClickZoom:!1,attributionControl:!1,crs:he,minZoom:0,maxZoom:5,zoom:r,scrollWheelZoom:!1,preferCanvas:!0,whenCreated:o},n)}const{VITE_API_ENDPOINT:q}={VITE_API_ENDPOINT:"http://64.227.1.216:3001",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0};function Z(r){return r<10?`00${r}`:r<100?`0${r}`:`${r}`}class ve extends w.TileLayer{getTileUrl(o){const n=8-o.z-1,i=[1,2,4,8,16,32,64],c=o.x*i[n-1],l=(-o.y-1)*i[n-1];return c<0||l<0||l>=64||c>=64?`${q}/assets/map/empty.webp`:`${q}/assets/map/map_l${n}_y${Z(l)}_x${Z(c)}.webp`}}const Pe=(r,o)=>({instance:new ve("placeholder",{...r}),context:o}),Ue=ie(Pe),xe=w.icon({iconUrl:"/player.webp",iconSize:[32,32],tooltipAnchor:[0,-20],className:"leaflet-player-marker"}),Te=a.exports.forwardRef(({location:r,rotation:o,mapRef:n,centered:i},c)=>{a.exports.useEffect(()=>{n&&r&&i&&n.panTo(r,{animate:!0,easeLinearity:1,duration:.5,noMoveStart:!0})},[n,r,i]);const l=c?.current?.getElement?.();return a.exports.useEffect(()=>{if(l){const m=+(l.getAttribute("data-rotation")||"0")||o;let y=o-180,u=0;m>=180?u+=Math.floor(Math.abs(m+180)/360):m<=-180&&(u-=Math.floor(Math.abs(m-180)/360)),y+=360*u,m-y>=180?y+=360:y-m>=180&&(y-=360),l.setAttribute("data-rotation",y.toString()),l.style.transformOrigin="center",l.style.transform=`${l.style.transform.replace(/\srotate.+/g,"")} rotate(${-y-90}deg)`}},[l,o,r]),t.createElement(F,{ref:c,icon:xe,position:r})});var J=a.exports.memo(Te);const Re="test";var Ce={test:Re};const Ae={en:Ce};let Se=localStorage?.getItem("locale")||"en";const Me=Ae[Se]||{};function e(r){return Me[r]||r}const Ie=[{category:"locations",type:"expedition",title:e("Expedition"),iconUrl:"/markers/expedition.webp",hasName:!0},{category:"locations",type:"fort",title:e("Fort"),iconUrl:"/markers/fort.webp",hasName:!0},{category:"locations",type:"outpost",title:e("Outpost"),iconUrl:"/markers/outpost.webp",hasName:!0},{category:"locations",type:"settlement",title:e("Settlement"),iconUrl:"/markers/settlement.webp",hasName:!0},{category:"locations",type:"spiritShrine",title:e("Spirit Shrine"),iconUrl:"/markers/spiritShrine.webp",hasName:!0},{category:"chests",type:"chestsEliteAlchemy",title:e("Alchemy Elite"),iconUrl:"/markers/chest_elite1.webp"},{category:"chests",type:"chestsEliteAncient",title:e("Ancient Elite"),iconUrl:"/markers/chest_elite2.webp"},{category:"chests",type:"chestsEliteProvisions",title:e("Provisions Elite"),iconUrl:"/markers/chest_elite3.webp"},{category:"chests",type:"chestsEliteSupplies",title:e("Supplies Elite"),iconUrl:"/markers/chest_elite4.webp"},{category:"chests",type:"chestsLargeAlchemy",title:e("Alchemy Large"),iconUrl:"/markers/chest_large1.webp"},{category:"chests",type:"chestsLargeAncient",title:e("Ancient Large"),iconUrl:"/markers/chest_large2.webp"},{category:"chests",type:"chestsLargeProvisions",title:e("Provisions Large"),iconUrl:"/markers/chest_large3.webp"},{category:"chests",type:"chestsLargeSupplies",title:e("Supplies Large"),iconUrl:"/markers/chest_large4.webp"},{category:"chests",type:"chestsCommonAlchemy",title:e("Alchemy Common"),iconUrl:"/markers/chest_common1.webp"},{category:"chests",type:"chestsCommonAncient",title:e("Ancient Common"),iconUrl:"/markers/chest_common2.webp"},{category:"chests",type:"chestsCommonProvisions",title:e("Provisions Common"),iconUrl:"/markers/chest_common3.webp"},{category:"chests",type:"chestsCommonSupplies",title:e("Supplies Common"),iconUrl:"/markers/chest_common4.webp"},{category:"enemies",type:"boss",title:e("Boss"),iconUrl:"/markers/boss.webp",hasName:!0,hasLevel:!0},{category:"enemies",type:"bossElite",title:e("Elite Boss"),iconUrl:"/markers/boss.webp",hasName:!0,hasLevel:!0},{category:"skinning",type:"alligator",title:e("Alligator"),iconUrl:"/markers/alligator.webp"},{category:"skinning",type:"bear",title:e("Bear"),iconUrl:"/markers/bear.webp"},{category:"skinning",type:"bison",title:e("Bison"),iconUrl:"/markers/bison.webp"},{category:"skinning",type:"boar",title:e("Boar"),iconUrl:"/markers/boar.webp"},{category:"skinning",type:"cow",title:e("Cow"),iconUrl:"/markers/cow.webp"},{category:"skinning",type:"elk",title:e("Elk"),iconUrl:"/markers/elk.webp"},{category:"skinning",type:"elemential_forest",title:e("Elemential Forest"),iconUrl:"/markers/elk.webp"},{category:"skinning",type:"elemential_mountain",title:e("Elemential Mountain"),iconUrl:"/markers/bear.webp"},{category:"skinning",type:"elemential_tundra",title:e("Elemential Tundra"),iconUrl:"/markers/wolf.webp"},{category:"skinning",type:"goat",title:e("Goat"),iconUrl:"/markers/sheep.webp"},{category:"skinning",type:"lion",title:e("Lion"),iconUrl:"/markers/puma.webp"},{category:"skinning",type:"lynx",title:e("Lynx"),iconUrl:"/markers/lynx.webp"},{category:"skinning",type:"pig",title:e("Pig"),iconUrl:"/markers/pig.webp"},{category:"skinning",type:"rabbit",title:e("Rabbit"),iconUrl:"/markers/hare.webp"},{category:"skinning",type:"sheep",title:e("Sheep"),iconUrl:"/markers/sheep.webp"},{category:"skinning",type:"turkey",title:e("Turkey"),iconUrl:"/markers/turkey.webp"},{category:"skinning",type:"wolf",title:e("Wolf"),iconUrl:"/markers/wolf.webp"},{category:"mining",type:"crystal",title:e("Crystal"),iconUrl:"/markers/crystal.webp"},{category:"mining",type:"gold",title:e("Gold"),iconUrl:"/markers/gold.webp"},{category:"mining",type:"iron",title:e("Iron"),iconUrl:"/markers/iron.webp"},{category:"mining",type:"lodestone",title:e("Lodestone"),iconUrl:"/markers/lodestone.webp"},{category:"mining",type:"oil",title:e("Oil"),iconUrl:"/markers/oil.webp"},{category:"mining",type:"orichalcum",title:e("Orichalcum"),iconUrl:"/markers/orichalcum.webp"},{category:"mining",type:"platinum",title:e("Platinum"),iconUrl:"/markers/platinum.webp"},{category:"mining",type:"saltpeter",title:e("Saltpeter"),iconUrl:"/markers/saltpeter.webp"},{category:"mining",type:"silver",title:e("Silver"),iconUrl:"/markers/silver.webp"},{category:"mining",type:"starmetal",title:e("Starmetal"),iconUrl:"/markers/starmetal.webp"},{category:"fishing",type:"fish_hotspot1",title:e("Fish Broad"),iconUrl:"/markers/fish_hotspot1.webp"},{category:"fishing",type:"fish_hotspot2",title:e("Fish Rare"),iconUrl:"/markers/fish_hotspot2.webp"},{category:"fishing",type:"fish_hotspot3",title:e("Fish Secret"),iconUrl:"/markers/fish_hotspot3.webp"},{category:"logging",type:"ironwood",title:e("Ironwood Tree"),iconUrl:"/markers/ironwood_compass.webp"},{category:"logging",type:"wyrdwood",title:e("Wyrdwood Tree"),iconUrl:"/markers/wyrdwood_compass.webp"},{category:"farming",type:"azoth_spring",title:e("Azoth Spring"),iconUrl:"/markers/azoth_spring.webp"},{category:"farming",type:"fungus",title:e("Fungus"),iconUrl:"/markers/fungi.webp"},{category:"farming",type:"hemp",title:e("Hemp"),iconUrl:"/markers/hemp_compass.webp"},{category:"farming",type:"herb",title:e("Herb"),iconUrl:"/markers/herbs.webp"},{category:"farming",type:"silkweed",title:e("Silkweed"),iconUrl:"/markers/silkweed.webp"},{category:"farming",type:"wirefiber",title:e("Wirefiber"),iconUrl:"/markers/wirefiber.webp"},{category:"cooking_ingredients",type:"barley",title:e("Barley"),iconUrl:"/markers/barley.webp"},{category:"cooking_ingredients",type:"berry",title:e("Berry"),iconUrl:"/markers/berry.webp"},{category:"cooking_ingredients",type:"blueberry",title:e("Blueberry"),iconUrl:"/markers/blueberry.webp"},{category:"cooking_ingredients",type:"broccoli",title:e("Broccoli"),iconUrl:"/markers/broccoli.webp"},{category:"cooking_ingredients",type:"cabbage",title:e("Cabbage"),iconUrl:"/markers/cabbage.webp"},{category:"cooking_ingredients",type:"carrot",title:e("Carrot"),iconUrl:"/markers/carrot.webp"},{category:"cooking_ingredients",type:"corn",title:e("Corn"),iconUrl:"/markers/corn.webp"},{category:"cooking_ingredients",type:"cranberry",title:e("Cranberry"),iconUrl:"/markers/cranberry.webp"},{category:"cooking_ingredients",type:"honey",title:e("Honey"),iconUrl:"/markers/honey.webp"},{category:"cooking_ingredients",type:"milk",title:e("Milk"),iconUrl:"/markers/milk.webp"},{category:"cooking_ingredients",type:"nuts",title:e("Nuts"),iconUrl:"/markers/nuts.webp"},{category:"cooking_ingredients",type:"potato",title:e("Potato"),iconUrl:"/markers/potato.webp"},{category:"cooking_ingredients",type:"pumpkin",title:e("Pumpkin"),iconUrl:"/markers/pumpkin.webp"},{category:"cooking_ingredients",type:"squash",title:e("Squash"),iconUrl:"/markers/squash.webp"},{category:"cooking_ingredients",type:"strawberry",title:e("Strawberry"),iconUrl:"/markers/strawberry.webp"},{category:"cooking_ingredients",type:"turkey_nest",title:e("Turkey Nest"),iconUrl:"/markers/turkey_nest.webp"},{category:"npc",type:"npc_generic",title:e("Generic"),iconUrl:"/markers/npc_generic.webp",hasName:!0},{category:"npc",type:"npc_inn",title:e("Inn"),iconUrl:"/markers/npc_inn.webp",hasName:!0},{category:"npc",type:"npc_covenant",title:e("Covenant"),iconUrl:"/markers/npc_covenant.webp",hasName:!0},{category:"npc",type:"npc_marauder",title:e("Marauder"),iconUrl:"/markers/npc_marauder.webp",hasName:!0},{category:"npc",type:"npc_syndicate",title:e("Syndicate"),iconUrl:"/markers/npc_syndicate.webp",hasName:!0},{category:"lore",type:"lore_note",title:e("Lore Note"),iconUrl:"/markers/lore_note.webp",hasName:!0},{category:"essences",type:"essences_shockbulb",title:e("Shockbulb"),iconUrl:"/markers/wind_plant.webp"},{category:"essences",type:"essences_shockspire",title:e("Shockspire"),iconUrl:"/markers/wind_stone.webp"},{category:"essences",type:"essences_lightning_beetle",title:e("Ligthning Beetle"),iconUrl:"/markers/wind_boid.webp"},{category:"essences",type:"essences_blightroot",title:e("Blightroot"),iconUrl:"/markers/death_plant.webp"},{category:"essences",type:"essences_blightcrag",title:e("Blightcrag"),iconUrl:"/markers/death_stone.webp"},{category:"essences",type:"essences_blightmoth",title:e("Blightmoth"),iconUrl:"/markers/death_boid.webp"},{category:"essences",type:"essences_earthspine",title:e("Earthspine"),iconUrl:"/markers/earth_plant.webp"},{category:"essences",type:"essences_earthcrag",title:e("Earthcrag"),iconUrl:"/markers/earth_stone.webp"},{category:"essences",type:"essences_earthshell_turtle",title:e("Earthshell Turtle"),iconUrl:"/markers/earth_boid.webp"},{category:"essences",type:"essences_dragonglory",title:e("Dragonglory"),iconUrl:"/markers/fire_plant.webp"},{category:"essences",type:"essences_scorchstone",title:e("Scorchstone"),iconUrl:"/markers/fire_stone.webp"},{category:"essences",type:"essences_salamander_snail",title:e("Salamander Snail"),iconUrl:"/markers/fire_boid.webp"},{category:"essences",type:"essences_lifebloom",title:e("Lifebloom"),iconUrl:"/markers/life_plant.webp"},{category:"essences",type:"essences_lifejewel",title:e("Lifejewel"),iconUrl:"/markers/life_stone.webp"},{category:"essences",type:"essences_lifemoth",title:e("Lifemoth"),iconUrl:"/markers/life_boid.webp"},{category:"essences",type:"essences_soulsprout",title:e("Soulsprout"),iconUrl:"/markers/spirit_plant.webp"},{category:"essences",type:"essences_soulspire",title:e("Soulspire"),iconUrl:"/markers/spirit_stone.webp"},{category:"essences",type:"essences_soulwyrm",title:e("Soulwyrm"),iconUrl:"/markers/spirit_boid.webp"},{category:"essences",type:"essences_rivercress",title:e("Rivercress"),iconUrl:"/markers/water_plant.webp"},{category:"essences",type:"essences_springstone",title:e("Springstone"),iconUrl:"/markers/water_stone.webp"},{category:"essences",type:"essences_floating_spinefish",title:e("Floating Spinefish"),iconUrl:"/markers/water_boid.webp"},{category:"pigment",type:"pigment_black_primsabloom",title:e("Black Prismabloom"),iconUrl:"/markers/pigment_black.webp"},{category:"pigment",type:"pigment_blue_primsabloom",title:e("Blue Prismabloom"),iconUrl:"/markers/pigment_blue.webp"},{category:"pigment",type:"pigment_brown_primsabloom",title:e("Brown Prismabloom"),iconUrl:"/markers/pigment_brown.webp"},{category:"pigment",type:"pigment_cyan_primsabloom",title:e("Cyan Prismabloom"),iconUrl:"/markers/pigment_cyan.webp"},{category:"pigment",type:"pigment_green_primsabloom",title:e("Green Prismabloom"),iconUrl:"/markers/pigment_green.webp"},{category:"pigment",type:"pigment_magenta_primsabloom",title:e("Magenta Prismabloom"),iconUrl:"/markers/pigment_magenta.webp"},{category:"pigment",type:"pigment_orange_primsabloom",title:e("Orange Prismabloom"),iconUrl:"/markers/pigment_orange.webp"},{category:"pigment",type:"pigment_red_primsabloom",title:e("Red Prismabloom"),iconUrl:"/markers/pigment_red.webp"},{category:"pigment",type:"pigment_turquoise_primsabloom",title:e("Turquoise Prismabloom"),iconUrl:"/markers/pigment_turquoise.webp"},{category:"pigment",type:"pigment_violet_primsabloom",title:e("Violet Prismabloom"),iconUrl:"/markers/pigment_violet.webp"},{category:"pigment",type:"pigment_white_primsabloom",title:e("White Prismabloom"),iconUrl:"/markers/pigment_white.webp"},{category:"pigment",type:"pigment_yellow_primsabloom",title:e("Yellow Prismabloom"),iconUrl:"/markers/pigment_yellow.webp"},{category:"service",type:"service_arcane_repository",title:e("Arcane Repository"),iconUrl:"/markers/service_arcane_repository.webp"},{category:"service",type:"service_forge",title:e("Forge"),iconUrl:"/markers/service_forge.webp"},{category:"service",type:"service_kitchen",title:e("Kitchen"),iconUrl:"/markers/service_kitchen.webp"},{category:"service",type:"service_loom",title:e("Loom"),iconUrl:"/markers/service_loom.webp"},{category:"service",type:"service_outfitting",title:e("Outfitting"),iconUrl:"/markers/service_outfitting.webp"},{category:"service",type:"service_smelter",title:e("Smelter"),iconUrl:"/markers/service_smelter.webp"},{category:"service",type:"service_stonecutting",title:e("Stonecutting"),iconUrl:"/markers/service_stonecutting.webp"},{category:"service",type:"service_storage",title:e("Storage"),iconUrl:"/markers/service_storage.webp"},{category:"service",type:"service_tannery",title:e("Tannery"),iconUrl:"/markers/service_tannery.webp"},{category:"service",type:"service_territory_board",title:e("Territory Board"),iconUrl:"/markers/service_territory_board.webp"},{category:"service",type:"service_town_board",title:e("Town Board"),iconUrl:"/markers/service_town_board.webp"},{category:"service",type:"service_trading_post",title:e("Trading Post"),iconUrl:"/markers/service_trading_post.webp"},{category:"service",type:"service_war_board",title:e("War Board"),iconUrl:"/markers/service_warboard.webp"},{category:"service",type:"service_woodshop",title:e("Woodshop"),iconUrl:"/markers/service_woodshop.webp"},{category:"service",type:"service_workshop",title:e("Workshop"),iconUrl:"/markers/service_workshop.webp"},{category:"other",type:"miscellaneous",title:e("Miscellaneous"),iconUrl:"/markers/other.webp"}];function Ne({markers:r}){const o=ae();return a.exports.useEffect(()=>{if(!o&&!r.length)return;const n=w.canvasIconLayer({}).addTo(o),i=[];for(let c=0;c<r.length;c++){const l=r[c],m=Ie.find(p=>p.type===l.type);if(!m)continue;const y=[l?.position?.[1]||0,l?.position?.[0]||0],u=w.icon({iconUrl:`${m?.iconUrl}`,iconSize:[30,30],iconAnchor:[10,9]}),h=w.marker(y,{icon:u});i.push(h)}i.length&&n.addLayers(i)},[o,r]),null}const Le=G.div`
  @keyframes pulseAssist {
    0% {
      box-shadow: 0 0 0 0 ${v.colors.pingAssist};
    }
    70% {
      box-shadow: 0 0 0 12px ${v.colors.pingShadow};
    }
    100% {
      box-shadow: 0 0 0 0 ${v.colors.pingShadow};
    }
  }
  @keyframes pulseWarning {
    0% {
      box-shadow: 0 0 0 0 ${v.colors.pingWarning};
    }
    70% {
      box-shadow: 0 0 0 12px ${v.colors.pingShadow};
    }
    100% {
      box-shadow: 0 0 0 0 ${v.colors.pingShadow};
    }
  }
  display: flex;
  width: 15px;
  height: 15px;
  border-radius: 50%;
  background: ${r=>v.colors?.["ping"+r.type]};
  cursor: pointer;
  box-shadow: 0 0 0 ${r=>v.colors?.["ping"+r.type]};
  animation: ${r=>"pulse"+r.type} 0.6s infinite;
  animation-fill-mode: forwards;
`,Oe=a.exports.forwardRef(({type:r,position:o},n)=>{const[i]=T("minimapEvent-volume",.3);a.exports.useEffect(()=>{const l=new Audio("/sounds/Bip.ogg");l.volume=.01,l.play()},[i]);const c=w.divIcon({className:"custom-icon",html:ce.renderToString(t.createElement(Le,{type:r}))});return t.createElement(F,{ref:n,position:o,icon:c})});var Ye=a.exports.memo(Oe);const j=a.exports.createContext({username:null,setUsername:()=>{}});function it({children:r}){const[o,n]=T("username",null);return t.createElement(j.Provider,{value:{username:o,setUsername:n}},r)}function Q(){return a.exports.useContext(j).username||"Party Member"}function De(){return a.exports.useContext(j).setUsername}const K=a.exports.createContext({position:null,following:!0,toggleFollowing:()=>{}});function at({children:r}){const[o,n]=a.exports.useState(null),[i,c]=T("following",!0),l=De(),{isRunning:m}=me({gameId:ge});a.exports.useEffect(()=>{if(!m)return;overwolf.games.events.setRequiredFeatures(["game_info"],()=>{});let u=setTimeout(P,50),h=!0,p=[0,0],g=!1,_="";async function P(){try{const R=await ye(),{player_name:k,location:E}=R?.game_info||{};if(E){const U=[+E.match(/position.y,(\d+.\d+)/)[1],+E.match(/position.x,(\d+.\d+)/)[1]],C=+E.match(/rotation.z,(\d+)/)[1];(p[0]!==U[0]||p[1]!==U[1])&&(p=U,n({location:U,rotation:C}),g=!1)}k&&k!==_&&(_=k,l(k))}catch(R){g||(console.error(R),g=!0)}finally{h&&(u=setTimeout(P,50))}}return()=>{h=!1,clearTimeout(u)}},[m]);function y(){c(!i)}return t.createElement(K.Provider,{value:{position:o,following:i,toggleFollowing:y}},r)}function X(){return a.exports.useContext(K)}const{VITE_API_ENDPOINT:ee}={VITE_API_ENDPOINT:"http://64.227.1.216:3001",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0};if(!ee)throw new Error("VITE_API_ENDPOINT is not set");async function Be(r,o={}){const n=await fetch(`${ee}${r}`,o);if(!n.ok){if(n.status===401){const c=new CustomEvent("session-expired");window.dispatchEvent(c)}if(n.headers.get("Content-Type")?.includes("application/json")){const c=await n.json();throw new Error(c)}else{const c=await n.text();throw new Error(c)}}return await n.json()}const te=a.exports.createContext({markers:[],refresh:()=>{}});function ct({children:r}){const[o,n]=T("markers",[]),i=a.exports.useCallback(()=>{Be("/api/markers").then(c=>{JSON.stringify(c)!==JSON.stringify(o)&&n(c)})},[]);return a.exports.useEffect(()=>{i()},[]),t.createElement(te.Provider,{value:{markers:o,refresh:i}},r)}function $e(){return a.exports.useContext(te)}const{VITE_API_ENDPOINT:re}={VITE_API_ENDPOINT:"http://64.227.1.216:3001",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0};if(!re)throw new Error("VITE_API_ENDPOINT is not set");let B;const Ve=()=>{const r=re;return B||(B=le(r,{reconnection:!0,transports:["websocket"]}))},H=()=>B;Ve();const ze="action",W=a.exports.createContext({event:null,socket:null});function lt({children:r}){const[o,n]=a.exports.useState(null);a.exports.useEffect(()=>(H().on(ze,n),()=>{H().disconnect()}),[]);const i=H();return t.createElement(W.Provider,{value:{event:o,socket:i}},r)}function je(){return a.exports.useContext(W).event}function He(){return a.exports.useContext(W).socket}const d={PARTY_CREATE:"party/create",PARTY_LEAVE:"party/leave",PARTY_JOIN:"party/join",PARTY_MOVE:"party/move",PARTY_MOVE_MEMBER:"party/move/party",PARTY_JOIN_MEMBER:"party/join/member",PARTY_LEAVE_MEMBER:"party/leave/member",PARTY_READY_CHECK_REQUEST:"party/readycheck/request",PARTY_READY_CHECK_REPLY:"party/readycheck/reply",PARTY_PULL_REQUEST:"party/pull/request",PARTY_PING_REQUEST:"party/ping/request",PARTY_PING_REPLY:"party/ping/receive",PARTY_DISCONNECT_MEMBER:"party/disconnect/member",ERROR:"error"},ne=a.exports.createContext({party:null,joinParty:()=>{},createParty:()=>{},leaveParty:()=>{},move:()=>{},ping:()=>{},pings:[],clearPings:()=>{},readyCheck:()=>{},pull:()=>{},members:{},total:0});function pt({children:r}){const[o,n]=T("latestMembers",{}),[i,c]=T("latestParty",null),[l,m]=T("minimapEvent",{type:"EMPTY"}),[y]=T("minimapEvent-readycheck","EMPTY"),[u,h]=a.exports.useState([]),p=je(),g=He(),_=Q(),P=({username:b,...f})=>{if(b)n({...o,[b]:{...o[b],...f,username:b}});else if(f.socketId){const x=Object.values(o).find(L=>L.socketId===f.socketId);x&&n({...o,[x.username]:{...o[x.username],...f}})}},R=b=>{const f=Object.keys(o).reduce((x,L)=>b.members.includes(L)?{...x,[L]:o[L]}:x,{});n(f)},k=b=>Object.values(o).find(x=>x.socketId===b)?.username;a.exports.useEffect(()=>{i&&(console.log("Reconnecting party:",i),E(i))},[]),a.exports.useEffect(()=>{switch(y){case"REQUEST":Y();break;case"NOT_READY":case"READY":$();break}},[y]),a.exports.useEffect(()=>{if(p&&p.type)switch(p.type){case d.PARTY_CREATE:c(p.payload?.partyId),P(p.payload?.member);break;case d.PARTY_JOIN:c(p.payload?.partyId),n(p.payload?.members);break;case d.PARTY_LEAVE:c(null),n({});break;case d.PARTY_JOIN_MEMBER:P(p.payload),m({highlight:`${p?.payload?.username}`,title:"joined group",type:"PARTY_ALERT"});break;case d.PARTY_MOVE_MEMBER:P(p.payload);break;case d.PARTY_LEAVE_MEMBER:R(p.payload),m({highlight:p?.payload?.username,title:"left group",type:"PARTY_ALERT"});break;case d.PARTY_DISCONNECT_MEMBER:P(p.payload),m({highlight:k(p?.payload?.socketId),title:"disconnected",type:"PARTY_ALERT"});break;case d.PARTY_PING_REPLY:h(b=>[...b,p.payload]);break;case d.PARTY_READY_CHECK_REQUEST:m({title:`${p?.payload?.username}`,time:3e4,type:"READY_CHECK"});break;case d.PARTY_PULL_REQUEST:m({highlight:`${p?.payload?.username}`,title:"start pulling in",type:"PULL",time:1e4});break;case d.ERROR:p.payload==="Invalid Party"&&(c(null),n({}));break}},[p]);const E=b=>{g?.emit(d.PARTY_JOIN,{partyId:b,username:_})},U=()=>{g?.emit(d.PARTY_CREATE,{username:_})},C=()=>{g?.emit(d.PARTY_LEAVE,{partyId:i})},O=(b,f)=>{i&&g?.emit(d.PARTY_MOVE,{username:_,position:b,rotation:f})},Y=()=>{i&&g?.emit(d.PARTY_READY_CHECK_REQUEST,{username:_})},$=()=>{i&&g?.emit(d.PARTY_READY_CHECK_REPLY,{username:_,ready:y})},V=()=>{i&&g?.emit(d.PARTY_PULL_REQUEST,{username:_})},M=({position:b,type:f})=>{i&&g?.emit(d.PARTY_PING_REQUEST,{username:_,position:b,type:f})},A=b=>{h(f=>f.filter(x=>x.pingId&&!b.includes(x.pingId)))},N=+(Object.keys(o).length||0);return t.createElement(ne.Provider,{value:{party:i,joinParty:E,createParty:U,leaveParty:C,readyCheck:Y,pull:V,ping:M,pings:u,clearPings:A,move:O,members:o,total:N}},r)}function oe(){return a.exports.useContext(ne)}function We({map:r}){const o=a.exports.useRef(null),{position:n}=X(),{markers:i}=$e(),c=Q(),{party:l,move:m,members:y,pings:u,ping:h,clearPings:p}=oe();pe({click:k=>{h({position:[k.latlng.lat,k.latlng.lng],type:"Warning"})}});const g=n?.location||[4200,8900],_=n?.rotation||0;a.exports.useEffect(()=>{l&&m(g,_)},[n]),a.exports.useEffect(()=>{if(u.length){const k=(u||[]).map(({pingId:E})=>`${E}`);setTimeout(()=>{p(k)},2e3)}},[u]);const P=a.exports.useMemo(()=>u.length?(u||[]).map(({type:E,position:U,pingId:C})=>C?t.createElement(Ye,{key:`ping-${C}`,type:E,position:U}):null):null,[u]),R=a.exports.useMemo(()=>Object.keys(y).filter(k=>y[k].username!==c).map(k=>{const E=y[k];return t.createElement(J,{key:`member-${k}`,mapRef:r,location:E.position||[0,0],rotation:E.rotation||0})}),[y]);return t.createElement(t.Fragment,null,t.createElement(Ue,{tileSize:1024}),t.createElement(J,{ref:o,mapRef:r,location:g,rotation:_,centered:!0}),R,P,i.length&&t.createElement(Ne,{markers:i}))}function mt({initialZoom:r}){const[o,n]=a.exports.useState(null);return a.exports.useEffect(()=>{o?.setZoom?.(r)},[r]),t.createElement(we,{initialZoom:r,setMap:n},t.createElement(We,{map:o}))}const Fe="Missing Location",Ge="Offline",qe=({username:r,pings:o,mePoint:n,position:i,online:c})=>{const l=o?.find(g=>g.username===r),m=l?`Point ${l.type}`:"",y=l?`pingLight${l.type}`:"blueOpacity",u=!i||!i[0]||!i[1],h=g=>g?.[0]&&g?.[1]?`(${n.distanceTo([g[1],g[0]]).toFixed(1)}m)`:"",p=()=>c?u?Fe:"":Ge;return t.createElement(s,{display:"flex",flexDirection:"column",border:"solid 1px",borderColor:"blueOpacity",minWidth:"100px",m:"spacing-1",bg:y,opacity:u?.8:1,style:{transition:"all ease 0.2s"}},t.createElement(s,{display:"flex",alignItems:"center",p:"spacing-2"},t.createElement(s,{mr:"spacing-4"},t.createElement("img",{width:20,height:20,src:"/player.webp"})),t.createElement(s,{style:{fontSize:12}},r," ",h(i))),t.createElement(s,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",p:"spacing-4",height:28,style:{fontSize:12}},t.createElement(s,null,m," ",h(l?.position)),t.createElement(s,{color:"pingLightAssist"},p())))};var Ze=a.exports.memo(qe);const Je=G.input`
  display: flex;
  flex: 1;
  background-color: ${v.colors.blackOpacity};
  color: ${v.colors.whiteOpacity};
  border: 1px solid ${v.colors.blackOpacity};
  /* padding-left: 8px; */
`,Qe=({onChange:r})=>t.createElement(Je,{onChange:o=>r(o.target.value),role:"input",maxLength:6}),I=["Party","Party Actions","Settings"],Ke=268,yt=()=>{const[r,o]=a.exports.useState(""),[n,i]=a.exports.useState(I[0]),c=D(ue),l=D(be),m=D(ke),y=D(de),[u]=T("minimapEvent-volume",.3),[h,p]=T("minimapEvent",{type:"EMPTY"}),{joinParty:g,createParty:_,leaveParty:P,readyCheck:R,pull:k,party:E,members:U,pings:C}=oe(),{position:O}=X(),Y=w.point(O?.location?.[1]||0,O?.location?.[0]||0),$=a.exports.useMemo(()=>{const M=I.map((A,N)=>{const b=N?"spacing-4":"none",f=n===A?"primaryActive":"primary";return t.createElement(s,{key:`party-control-${A}`,ml:b},t.createElement(S,{key:`party-control-button-${A}`,variant:f,onClick:()=>i(A)},A))});return t.createElement(s,{display:"flex",width:"100%",flexWrap:"nowrap"},M)},[n]),V=a.exports.useMemo(()=>n===I[0]?t.createElement(s,{key:"party-tab-0",display:"flex",style:{flexFlow:"column wrap"},maxHeight:Ke},Object.values(U).map(({username:M,position:A,online:N},b)=>t.createElement(Ze,{key:`party-member-${M}-${b}`,username:M,pings:C,mePoint:Y,position:A,online:N}))):n===I[1]?t.createElement(s,{key:"party-tab-1",display:"flex",flexDirection:"column"},t.createElement(s,{display:"flex",flexDirection:"column"},t.createElement(s,{my:"spacing-6"},"Timers"),t.createElement(s,{display:"flex",flexDirection:"row"},t.createElement(s,{mr:"spacing-4"},t.createElement(S,{key:"party-pull",variant:"primary",disabled:h.type===z.COUNTDOWN,onClick:()=>p({title:"2min countdown",time:12e4,type:"COUNTDOWN"})},"Countdown 2min")),t.createElement(s,null,t.createElement(S,{key:"party-pull",variant:"primary",disabled:h.type===z.TIMER,onClick:()=>p({title:"Timer",type:"TIMER"})},"Timer")))),t.createElement(s,{display:"flex",flexDirection:"column",mt:"spacing-12"},t.createElement(s,{my:"spacing-6"},"Pull"),t.createElement(s,{display:"flex",flexDirection:"row"},t.createElement(s,{mr:"spacing-4"},t.createElement(S,{key:"party-readycheck",variant:"primary",onClick:R},"Ready Check")),t.createElement(s,{mr:"spacing-4"},t.createElement(S,{key:"party-pull",variant:"primary",disabled:h.type===z.PULL,onClick:k},"Pull"))))):n===I[2]?t.createElement(s,{key:"party-tab-2",display:"flex",flexDirection:"column"},t.createElement(s,{my:"spacing-6"},"Volume: ",t.createElement("b",null,u)),t.createElement(s,{mt:"spacing-8",mb:"spacing-4"},"Hotkeys"),t.createElement(s,{display:"flex",flexDirection:"row",color:"pingAssist"},t.createElement(s,{mr:"spacing-6"},"Self Ping Assist:"),t.createElement(s,null,t.createElement("a",{href:`overwolf://settings/games-overlay?hotkey=${c}&gameId=21816`},c))),t.createElement(s,{display:"flex",flexDirection:"row",color:"pingWarning"},t.createElement(s,{mr:"spacing-6"},"Self Ping Warning:"),t.createElement(s,null,t.createElement("a",{href:`overwolf://settings/games-overlay?hotkey=${l}&gameId=21816`},l))),t.createElement(s,{display:"flex",flexDirection:"row"},t.createElement(s,{mr:"spacing-6"},"Map Zoom In:"),t.createElement(s,null,t.createElement("a",{href:`overwolf://settings/games-overlay?hotkey=${m}&gameId=21816`},m))),t.createElement(s,{display:"flex",flexDirection:"row"},t.createElement(s,{mr:"spacing-6"},"Map Zoom Out:"),t.createElement(s,null,t.createElement("a",{href:`overwolf://settings/games-overlay?hotkey=${y}&gameId=21816`},y))),t.createElement(s,{mt:"spacing-12",mr:"spacing-4"},t.createElement(S,{key:"party-leave",variant:"warning",onClick:()=>{P(),setTimeout(()=>i(I[0]),100)}},"Leave Party"))):null,[n,U,C]);return E?t.createElement(s,{display:"flex",flexDirection:"column",alignItems:"flex-end"},t.createElement(s,{display:"flex",pt:"spacing-8",flexWrap:"nowrap",justifyContent:"space-between",width:"100%"},t.createElement(s,null),t.createElement(s,null,$)),t.createElement(s,{p:"spacing-4",bg:"blueOpacity",width:"100%",style:{border:`solid 1px ${v.colors.blackOpacity}`,borderTop:"none"}},V)):t.createElement(s,{display:"flex",flexDirection:"column"},t.createElement(s,{display:"flex",py:"spacing-8"},t.createElement(s,{mr:"spacing-8"},t.createElement(S,{variant:"primary",onClick:()=>_()},"Create Party")),t.createElement(s,{display:"flex",flex:1},t.createElement(s,{mr:"spacing-2"},t.createElement(S,{variant:"primary",onClick:()=>g(r)},"Join Party")),t.createElement(Qe,{onChange:o}))))};function Xe(){return t.createElement("svg",{height:"16px",viewBox:"0 0 24 24",width:"16px",fill:"currentColor"},t.createElement("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}))}function et(){return t.createElement("svg",{height:"16px",viewBox:"0 0 24 24",width:"16px",fill:"currentColor"},t.createElement("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}))}function tt(){return t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",x:"0px",y:"0px",viewBox:"0 0 1000 1000",enableBackground:"new 0 0 1000 1000",height:"16px",width:"16px"},t.createElement("g",null,t.createElement("path",{d:"M710,10H360c-38.6,0-70,31.4-70,70v630c0,38.6,31.4,70,70,70h490c38.6,0,70-31.4,70-70V220L710,10z M710,109l111,111H710V109z M850,710H360V80h280v210h210V710z"}),t.createElement("path",{d:"M430,360h350v70H430V360z"}),t.createElement("path",{d:"M430,500h350v70H430V500z"}),t.createElement("path",{d:"M640,920H150V290h70v-70h-70c-38.6,0-70,31.4-70,70v630c0,38.6,31.4,70,70,70h490c38.6,0,70-31.4,70-70v-70h-70V920z"})))}const gt=({title:r,hidden:o})=>{const[n,i]=a.exports.useState(!0),c=()=>{i(m=>!m)},l=()=>{overwolf.utils.placeOnClipboard(r)};return t.createElement(s,{display:"flex",justifyContent:"center",alignItems:"center"},t.createElement(s,{height:18,style:{color:v.colors.lins,fontSize:"18px",fontFamily:"monospace",lineHeight:n?"16px":"22px"},hidden:o},n?r:"******"),t.createElement(s,{hidden:o},t.createElement("button",{onClick:c,style:{width:20,height:20},title:"Toggle Party Code"},n?t.createElement(et,null):t.createElement(Xe,null)),t.createElement("button",{onClick:l,style:{width:20,height:20},title:"Copy Party Code"},t.createElement(tt,null))))};function ut(){return t.createElement("svg",{viewBox:"0 0 24 24"},t.createElement("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"}))}export{ct as M,pt as P,gt as R,lt as S,it as U,at as a,oe as b,X as c,ut as d,mt as e,yt as f,Q as u};
